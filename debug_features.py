#!/usr/bin/env python3
"""
Debug script to check actual feature names generated by the feature engineering pipeline
"""

import sys
import os
sys.path.append(os.path.dirname(os.path.abspath(__file__)))

import pandas as pd
import numpy as np
from app.utils.data_preprocessing import DataPreprocessor
from app.utils.feature_engineering import FeatureEngineer

def main():
    print("ğŸ” Debugging feature names...")
    
    # Load a small sample of data
    preprocessor = DataPreprocessor()
    engineer = FeatureEngineer()
    
    # Load just a few rows to test
    try:
        data = preprocessor.load_data('dataset.csv')
        print(f"Loaded {len(data)} rows of data")
        
        # Take just a small sample for quick testing
        sample_data = data.head(200).copy()  # Just first 200 rows
        
        # Apply feature engineering to see what features are created
        features = engineer.feature_engineering_pipeline(sample_data)
        
        print(f"\nğŸ“Š Generated Features ({len(features.columns)} total):")
        print("=" * 60)
        
        # Print all feature names
        feature_cols = [col for col in features.columns if col not in ['crypto_name', 'date', 'open', 'high', 'low', 'close', 'volume']]
        
        for i, feature in enumerate(feature_cols, 1):
            print(f"{i:3d}. {feature}")
        
        print(f"\nğŸ¯ First 10 features for model:")
        print(feature_cols[:10])
        
    except Exception as e:
        print(f"âŒ Error: {e}")
        import traceback
        traceback.print_exc()

if __name__ == "__main__":
    main()
